# 手机端验证测试计划与记录模板

> 智能食物记录 App - 手动验证测试指南

**文档版本：** v1.0
**生成日期：** 2026-01-16
**测试执行人：** _______________
**测试日期：** _______________

---

## 1. 测试概述

### 1.1 测试目的

本测试计划旨在验证以下优化后的功能：

| 测试领域 | 验证内容 |
|----------|----------|
| **启动流程** | 首次访问强制设置目标、目标设置成功后的自动跳转 |
| **手机访问体验** | IP地址获取可靠性、多IP选择、复制链接、WiFi连接指引 |
| **数据持久化** | 表单刷新后数据不丢失 |
| **核心功能** | 拍照识别、份量选择、余额更新 |

### 1.2 测试前提

在开始测试前，请确保：

- [ ] **后端服务已启动**：访问 http://localhost:8000/docs 应显示API文档
- [ ] **前端服务已启动**：访问 http://localhost:5173 应显示应用首页
- [ ] **手机与电脑在同一WiFi**：两台设备连接相同的无线网络
- [ ] **数据库已初始化**：105种食物数据已导入

### 1.3 所需设备

| 设备类型 | 推荐配置 | 数量 |
|----------|----------|------|
| **电脑** | Windows/Mac，运行开发服务器 | 1台 |
| **手机** | Android 或 iOS，不同品牌/系统 | 至少2台 |
| **网络** | 同一WiFi环境 | 1个 |

---

## 2. 详细测试用例

---

### 用例A1：多设备网络访问

**测试目标：** 验证手机能够成功访问应用，IP获取策略可靠工作

#### A1.1 获取访问地址

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 在电脑浏览器打开 http://localhost:5173 | 首页正常加载 | ☐ 通过 ☐ 失败 |
| 2 | 在首页找到"手机访问"卡片 | 显示紫渐变卡片，含IP地址 | ☐ 通过 ☐ 失败 |
| 3 | 检查显示的IP地址格式 | 格式如 `http://192.168.x.x:5173` | ☐ 通过 ☐ 失败 |
| 4 | 记录显示的IP地址：________________ | - | - |

**实际结果记录：**
```
IP状态：☐ 正常显示  ☐ 显示"获取中..."  ☐ 显示localhost
检测到多IP：☐ 是  ☐ 否
```

#### A1.2 复制链接功能

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 点击"📋 复制"按钮 | 提示"链接已复制到剪贴板" | ☐ 通过 ☐ 失败 |
| 2 | 在手机浏览器地址栏长击粘贴 | 粘贴的URL与显示一致 | ☐ 通过 ☐ 失败 |

#### A1.3 多IP选择（如有）

**仅当检测到多个IP时执行此测试**

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 查看是否显示多个IP地址列表 | 显示多个可点击的IP选项 | ☐ 通过 ☐ 失败 |
| 2 | 点击其中一个IP | 该IP变为选中状态（高亮） | ☐ 通过 ☐ 失败 |

#### A1.4 手机浏览器访问

**请使用至少2台不同手机进行测试**

| 手机信息 | 品牌/系统：_______________ | 品牌/系统：_______________ |
|----------|--------------------------|--------------------------|
| **步骤1** | 在手机浏览器输入复制的URL | 页面正常加载，显示首页 | ☐ 通过 ☐ 失败 | ☐ 通过 ☐ 失败 |
| **步骤2** | 检查页面布局是否正常 | UI无错位，元素可见 | ☐ 通过 ☐ 失败 | ☐ 通过 ☐ 失败 |
| **步骤3** | 测试页面滚动和点击 | 响应流畅，无卡顿 | ☐ 通过 ☐ 失败 | ☐ 通过 ☐ 失败 |
| **步骤4** | 记录加载时间（秒） | < 3秒 | ___ 秒 | ___ 秒 |

**访问结果汇总：**
- 手机1访问成功率：☐ 100%  ☐ 部分（说明：_________）  ☐ 失败
- 手机2访问成功率：☐ 100%  ☐ 部分（说明：_________）  ☐ 失败

#### A1.5 WiFi连接指引

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 点击"🔍 手机无法连接？" | 展开检查清单 | ☐ 通过 ☐ 失败 |
| 2 | 阅读检查清单内容 | 显示4条检查项 | ☐ 通过 ☐ 失败 |

**是否需要参考指引解决问题：**
☐ 不需要，连接正常
☐ 需要，问题已解决（说明：_________）
☐ 需要，问题未解决（说明：_________）

---

### 用例A2：首次使用目标设置流程

**测试目标：** 验证首次启动时的强制目标设置流程

#### A2.1 强制跳转到目标页

**前置条件：** 清除手机浏览器缓存和localStorage

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 在手机浏览器打开应用地址 | 自动跳转到目标设置页 | ☐ 通过 ☐ 失败 |
| 2 | 检查URL是否包含 `/goal` | 是，且带 `?redirect=/` 参数 | ☐ 通过 ☐ 失败 |
| 3 | 检查是否显示警告提示 | 显示"⚠️ 请先设置您的减脂目标" | ☐ 通过 ☐ 失败 |
| 4 | 检查进度指示器 | 显示步骤1（基本信息）激活 | ☐ 通过 ☐ 失败 |

#### A2.2 表单填写与进度指示

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 选择性别（男/女） | 按钮变为激活状态（蓝色） | ☐ 通过 ☐ 失败 |
| 2 | 填写年龄、身高、体重 | 输入框正常接受输入 | ☐ 通过 ☐ 失败 |
| 3 | 完成基本信息后查看进度 | 步骤1完成，步骤2（热量目标）激活 | ☐ 通过 ☐ 失败 |
| 4 | 选择热量缺口选项 | 选项变为激活状态 | ☐ 通过 ☐ 失败 |
| 5 | 查看计算结果预览 | 显示热量和蛋白质目标值 | ☐ 通过 ☐ 失败 |

**填写的数据记录：**
- 性别：______ 年龄：____ 身高：____ 体重：____
- 热量缺口：_____
- 计算结果：热量 _____ kcal，蛋白质 _____ g

#### A2.3 数据持久化测试（刷新测试）

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 填写部分表单信息（如只填性别和年龄） | 数据暂存 | ☐ 通过 ☐ 失败 |
| 2 | 刷新浏览器页面 | 页面重新加载，表单数据保持不变 | ☐ 通过 ☐ 失败 |
| 3 | 检查进度指示器状态 | 应保持在步骤1或2（根据已填内容） | ☐ 通过 ☐ 失败 |
| 4 | 继续填写完成表单 | 可正常填写剩余字段 | ☐ 通过 ☐ 失败 |

**数据丢失情况：**
☐ 无数据丢失，完美
☐ 部分字段丢失（说明：_________）
☐ 完全丢失

#### A2.4 目标保存成功与自动跳转

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 点击"确认并保存"按钮 | 按钮变为加载状态（短暂） | ☐ 通过 ☐ 失败 |
| 2 | 等待响应 | 显示"✅ 目标设置成功！"绿色提示 | ☐ 通过 ☐ 失败 |
| 3 | 观察倒计时 | 显示"3秒后跳转到首页..."并递减 | ☐ 通过 ☐ 失败 |
| 4 | 等待倒计时结束 | 自动跳转到首页 | ☐ 通过 ☐ 失败 |
| 5 | 检查首页内容 | 显示今日余额（根据设定的目标） | ☐ 通过 ☐ 失败 |

**跳转计时：**
实际跳转时间：____ 秒（预期：3秒）

#### A2.5 "跳过"功能测试

**前置条件：** 清除localStorage，重新访问应用

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 在目标页找到"跳过，稍后设置"按钮 | 按钮显示在"确认并保存"下方 | ☐ 通过 ☐ 失败 |
| 2 | 点击"跳过，稍后设置"按钮 | 跳转到首页 | ☐ 通过 ☐ 失败 |
| 3 | 检查首页"立刻记录"按钮 | 按钮可点击或显示提示 | ☐ 通过 ☐ 失败 |

---

### 用例B1：核心记录流程

**测试目标：** 验证从拍照到记录完成的完整流程

#### B1.1 进入拍照页面

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 在首页点击"📷 立刻记录"按钮 | 跳转到拍照/记录页面 | ☐ 通过 ☐ 失败 |
| 2 | 检查页面是否显示相机界面或上传按钮 | 正常显示 | ☐ 通过 ☐ 失败 |

#### B1.2 图片上传与AI识别

**说明：** 可使用真实拍照或选择一张食物图片

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 上传/拍摄食物图片 | 图片预览显示 | ☐ 通过 ☐ 失败 |
| 2 | 等待AI识别处理 | 显示加载状态 | ☐ 通过 ☐ 失败 |
| 3 | 查看识别结果 | 显示食物名称（如"鸡蛋"、"鸡胸肉"等） | ☐ 通过 ☐ 失败 |
| 4 | 识别的食物名称 | ________________ | - |

**识别结果：**
- AI识别是否成功：☐ 是  ☐ 否（使用模拟识别）
- 识别的食物：_______________

#### B1.3 份量选择与视觉描述

**重点：** 验证份量选项包含直观的视觉描述（如"拳头大小"、"掌心大小"等）

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 查看份量选项列表 | 显示3-4个份量选项 | ☐ 通过 ☐ 失败 |
| 2 | 检查份量名称格式 | 包含视觉描述（如"水煮蛋1个（约50g）"） | ☐ 通过 ☐ 失败 |
| 3 | 检查份量详情 | 显示热量和蛋白质值 | ☐ 通过 ☐ 失败 |
| 4 | 选择一个份量选项 | 选项变为选中状态 | ☐ 通过 ☐ 失败 |

**份量选项记录（示例）：**
| 份量名称 | 视觉描述 | 热量 | 蛋白质 |
|----------|----------|------|--------|
| 示例：水煮蛋1个 | 约50g | 70 kcal | 6g |
| ___________ | ___________ | _____ | _____ |
| ___________ | ___________ | _____ | _____ |

**视觉描述质量评估：**
☐ 优秀（描述直观易懂）
☐ 良好（有描述但可更清晰）
☐ 需改进（描述模糊或缺失）

#### B1.4 确认记录

| 步骤 | 操作 | 预期结果 | 实际结果 |
|------|------|----------|----------|
| 1 | 点击"确认记录"按钮 | 提交记录 | ☐ 通过 ☐ 失败 |
| 2 | 等待处理完成 | 显示成功提示或跳转回首页 | ☐ 通过 ☐ 失败 |
| 3 | 检查首页今日余额 | 剩余热量和蛋白质已扣减 | ☐ 通过 ☐ 失败 |
| 4 | 检查今日记录提示 | 显示"✔"标记，餐次计数+1 | ☐ 通过 ☐ 失败 |

**记录前后余额对比：**
| 项目 | 记录前 | 记录后 | 变化 |
|------|--------|--------|------|
| 剩余热量 | _____ kcal | _____ kcal | - _____ kcal |
| 剩余蛋白质 | _____ g | _____ g | - _____ g |
| 今日餐次 | _____ 次 | _____ 次 | +1 次 |

---

### 用例B2：首页功能检查

**测试目标：** 验证首页各项功能正常显示

#### B2.1 今日余额卡片

| 检查项 | 预期结果 | 实际结果 |
|--------|----------|----------|
| 余额卡片显示 | 白色卡片，带图标 | ☐ 通过 ☐ 失败 |
| 剩余热量数值 | 显示具体数值（如"1500 大卡"） | ☐ 通过 ☐ 失败 |
| 剩余蛋白质数值 | 显示具体数值（如"100g"） | ☐ 通过 ☐ 失败 |
| 进度条 | 显示已用/目标比例 | ☐ 通过 ☐ 失败 |
| 进度条颜色 | 蓝绿渐变 | ☐ 通过 ☐ 失败 |

**当前显示数据：**
- 剩余热量：___________
- 剩余蛋白质：___________
- 目标热量：___________
- 已用热量：___________

#### B2.2 智能建议卡片

**说明：** 当有剩余额度时，会显示智能推荐食物

| 检查项 | 预期结果 | 实际结果 |
|--------|----------|----------|
| 建议卡片显示 | 白色卡片，标题"🧠 可以吃这些" | ☐ 通过 ☐ 失败 |
| 建议列表 | 显示1-5个推荐食物 | ☐ 通过 ☐ 失败 |
| 建议项格式 | 显示食物名、热量、理由 | ☐ 通过 ☐ 失败 |
| 快速添加按钮 | 点击"➕"可快速记录 | ☐ 通过 ☐ 失败 ☐ 未测试 |

**显示的推荐食物（记录前3个）：**
1. ___________ - _____ kcal - 理由：_________
2. ___________ - _____ kcal - 理由：_________
3. ___________ - _____ kcal - 理由：_________

#### B2.3 今日记录状态

| 检查项 | 预期结果 | 实际结果 |
|--------|----------|----------|
| 状态栏显示 | "📅 今日 ✔✔"（示例） | ☐ 通过 ☐ 失败 |
| 餐次计数 | ✔数量与实际记录数一致 | ☐ 通过 ☐ 失败 |
| 无记录时显示 | 显示"暂无记录" | ☐ 通过 ☐ 失败 |

#### B2.4 其他入口

| 检查项 | 预期结果 | 实际结果 |
|--------|----------|----------|
| "📈 查看进度"链接 | 可点击，跳转到进度页 | ☐ 通过 ☐ 失败 ☐ 未测试 |
| 手机访问提示卡片 | 显示，可关闭 | ☐ 通过 ☐ 失败 |

---

## 3. 问题记录模板

### 3.1 问题列表

| # | 问题描述 | 复现步骤 | 严重程度 | 状态 |
|---|----------|----------|----------|------|
| 1 | | | ☐高 ☐中 ☐低 | ☐待处理 ☐已解决 |
| 2 | | | ☐高 ☐中 ☐低 | ☐待处理 ☐已解决 |
| 3 | | | ☐高 ☐中 ☐低 | ☐待处理 ☐已解决 |
| 4 | | | ☐高 ☐中 ☐低 | ☐待处理 ☐已解决 |
| 5 | | | ☐高 ☐中 ☐低 | ☐待处理 ☐已解决 |

**严重程度说明：**
- **高**：阻塞核心功能，无法继续使用
- **中**：功能可用但体验受影响
- **低**：小问题，不影响使用

### 3.2 详细问题描述（可附加截图）

**问题 #1**

- **标题：** _________________________________________________
- **严重程度：** ☐ 高  ☐ 中  ☐ 低
- **复现步骤：**
  1.
  2.
  3.
- **实际结果：** _________________________________________________
- **预期结果：** _________________________________________________
- **截图/录屏：** （可附加）
- **备注：** _________________________________________________

---

**问题 #2**

- **标题：** _________________________________________________
- **严重程度：** ☐ 高  ☐ 中  ☐ 低
- **复现步骤：**
  1.
  2.
  3.
- **实际结果：** _________________________________________________
- **预期结果：** _________________________________________________
- **截图/录屏：** （可附加）
- **备注：** _________________________________________________

---

## 4. 测试结果总结

### 4.1 测试执行情况

| 测试用例 | 执行状态 | 通过率 |
|----------|----------|--------|
| A1: 多设备网络访问 | ☐ 已完成  ☐ 未执行 | ___ % |
| A2: 首次目标设置流程 | ☐ 已完成  ☐ 未执行 | ___ % |
| B1: 核心记录流程 | ☐ 已完成  ☐ 未执行 | ___ % |
| B2: 首页功能检查 | ☐ 已完成  ☐ 未执行 | ___ % |

### 4.2 发现问题统计

| 严重程度 | 数量 |
|----------|------|
| 高 | ___ 个 |
| 中 | ___ 个 |
| 低 | ___ 个 |
| **合计** | ___ 个 |

### 4.3 总体结论

**测试是否通过：**
☐ **通过** - 所有核心功能正常，可投入使用
☐ **有条件通过** - 存在中等问题，建议修复后发布
☐ **不通过** - 存在严重问题，必须修复后重新测试

**主要发现：**
```
（请在此填写总体测试结论，包括：）
1. 功能完成度评估
2. 用户体验评价
3. 性能表现（加载速度、响应时间）
4. 最突出的问题（如有）


```

### 4.4 后续建议

**需优先处理的问题：**
1.
2.
3.

**改进建议：**
```
（请填写改进建议，包括：）
1. 功能优化建议
2. 体验改进建议
3. 性能优化建议


```

### 4.5 测试签名

**测试执行人：** _______________
**测试日期：** _______________
**审核人：** _______________
**审核日期：** _______________

---

## 附录：快速检查清单

### 启动前检查

- [ ] 后端服务正常运行（http://localhost:8000/docs）
- [ ] 前端服务正常运行（http://localhost:5173）
- [ ] 手机与电脑在同一WiFi
- [ ] 知道电脑的局域网IP地址

### 测试中检查

- [ ] 每个用例填写实际结果
- [ ] 遇到问题立即记录详细步骤
- [ ] 保留问题截图（如有）

### 测试后检查

- [ ] 所有测试用例已完成
- [ ] 问题记录完整
- [ ] 填写测试结果总结

---

*本测试模板基于 STARTUP_MOBILE_OPTIMIZATION_SUMMARY.md 优化内容生成*
*如有疑问，请参考优化摘要文档或联系开发人员*
