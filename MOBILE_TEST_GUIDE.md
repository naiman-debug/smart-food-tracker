# 手机测试指南

> 智能食物记录 App - 移动端访问指南

---

## 目录

1. [查找电脑IP地址](#1-查找电脑ip地址)
2. [手机连接同一WiFi](#2-手机连接同一wifi)
3. [手机访问应用](#3-手机访问应用)
4. [常见问题排查](#4-常见问题排查)

---

## 1. 查找电脑IP地址

### Windows 系统

**方法一：使用命令提示符**
1. 按 `Win + R`，输入 `cmd`，按回车
2. 在命令提示符中输入：
   ```
   ipconfig
   ```
3. 找到 "IPv4 地址"，格式类似：`192.168.1.100`

**方法二：使用设置**
1. 打开「设置」→「网络和Internet」
2. 点击当前连接的网络（如 "WLAN"）
3. 向下滚动找到 "IPv4 地址"

### macOS 系统

**方法一：使用终端**
1. 打开「终端」（应用程序 → 实用工具 → 终端）
2. 输入以下命令：
   ```
   ipconfig getifaddr en0
   ```
   或者（如果使用Wi-Fi）：
   ```
   ipconfig getifaddr en1
   ```
3. 显示的IP地址格式类似：`192.168.1.100`

**方法二：使用系统偏好设置**
1. 打开「系统偏好设置」→「网络」
2. 选择左侧的已连接网络
3. 查看右侧显示的IP地址

### Linux 系统

打开终端，输入：
```
hostname -I
```
或者
```
ip addr show | grep inet
```

---

## 2. 手机连接同一WiFi

### 重要提示

**手机和电脑必须连接到同一个WiFi网络！**

### 检查方法

1. **查看电脑连接的网络**
   - Windows: 点击右下角网络图标
   - Mac: 点击顶部菜单栏WiFi图标

2. **在手机上连接相同的WiFi**
   - 打开手机设置 → WLAN/WiFi
   - 选择与电脑相同的网络名称

3. **确认连接成功**
   - 手机显示已连接
   - 可以正常上网

---

## 3. 手机访问应用

### URL格式

在手机浏览器中访问：

```
http://[你的电脑IP]:5173
```

### 示例

如果电脑IP是 `192.168.1.100`，则在手机浏览器输入：

```
http://192.168.1.100:5173
```

### 访问步骤

1. **打开手机浏览器**
   - iOS: Safari
   - Android: Chrome

2. **输入URL**
   ```
   http://192.168.1.100:5173
   ```
   （将IP替换为你的实际IP地址）

3. **等待加载**
   - 首次加载可能需要5-10秒
   - 看到应用界面即表示成功

---

## 4. 常见问题排查

### 问题1：手机无法访问

**症状**：手机浏览器显示 "无法访问此网站" 或 "连接超时"

**解决方案**：

#### 检查电脑防火墙

**Windows:**
1. 打开「Windows安全中心」→「防火墙和网络保护」
2. 点击「允许应用通过防火墙」
3. 找到「Python」或「uvicorn」，确保已勾选「专用」和「公用」

**macOS:**
1. 打开「系统偏好设置」→「安全性与隐私」→「防火墙」
2. 如果防火墙已开启，点击「防火墙选项」
3. 添加 Python 或允许传入连接

#### 检查前端服务配置

确认前端服务使用了 `--host 0.0.0.0` 参数启动：
```bash
npm run dev -- --host 0.0.0.0
```

### 问题2：显示IP地址不正确

**症状**：电脑IP地址与局域网段不匹配

**解决方案**：

1. 检查路由器IP段设置
2. 常见IP段：
   - 192.168.0.x
   - 192.168.1.x
   - 192.168.2.x
   - 10.0.0.x

### 问题3：应用无法正常使用

**症状**：页面打开但功能异常

**检查清单**：

- [ ] 后端服务是否正常运行？（访问 `http://[IP]:8000/docs`）
- [ ] 前端API地址是否正确？（检查 `frontend/src/api/index.ts`）
- [ ] 数据库是否已初始化？

### 问题4：图片上传失败

**症状**：选择图片后无法上传

**解决方案**：

1. 确认后端服务正常运行
2. 检查浏览器控制台是否有错误信息
3. 确认 `GLM_API_KEY` 已正确配置

---

## 快速测试流程

### 测试AI识别功能

1. **拍摄食物照片**
   - 点击「拍照」按钮
   - 选择相机拍摄或从相册选择

2. **查看识别结果**
   - 成功：显示食物名称和份量选项
   - 失败：显示食物分类选择界面

3. **测试备选流程**
   - 点击不同的食物分类
   - 使用搜索功能查找食物
   - 选择食物后进入份量选择

### 测试记录功能

1. 选择份量大小
2. 点击「添加到本餐」
3. 点击「确认记录」
4. 查看记录成功提示

---

## API测试

在手机浏览器中访问以下地址测试API：

```
http://[你的IP]:8000/docs
```

可以看到完整的API文档和测试界面。

---

## 联系方式

如遇到其他问题：

1. 检查后端日志：`backend/backend.log`
2. 检查前端日志：`frontend/frontend.log`
3. 重启服务：关闭命令行窗口，重新运行启动脚本

---

*文档版本: v1.0*
*更新日期: 2026-01-16*
